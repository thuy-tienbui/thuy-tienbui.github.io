{
  "hash": "78aef351ff51c6293682195efdf0020c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Principal Component Analysis of Environmental Variables and Global Tree Canopy Cover\"\ndescription: |\n  Using PCA to determine the relationship between tree canopy cover and various environmental variables\nauthor:\n  - name: Thuy-Tien Bui\ndate: 2025-02-14\ncategories: [R, Modeling, Climate]\nimage: tree_cover.jpg\nformat:\n  html:\n    embed-resources: true\n    code-fold: true\n    toc: false\n    page-layout: full\necho: true\nmessage: false\nwarning: false\n---\n\n\n\n### Dataset and Analysis Overview\n\nThe dataset used in this analysis contains the following 28 environmental variables aggregated at the country level (all data was acquired through Google Earth Engine and averaged at a 10km resolution):\n\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Travel time to cities (min)                | -   Slope                                      | -   Elevation (m)                           | -   Aspect                                  |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Average cloudy days per year (days)        | -   Percent cropland cover (%)                 | -   Percent tree canopy cover (%)           | -   Isothermality                           |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Precipitation of driest month (mm)         | -   Precipitation of wettest month (mm)        | -   Precipitation of driest quarter (mm)    | -   Precipitation of wettest quarter (mm)   |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Precipitation of coldest quarter (mm)      | -   Precipitation of warmest quarter (mm)      | -   Precipitation seasonality (mm)          | -   Annual precipitation (mm)               |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Mean temperature of coldest quarter (degC) | -   Mean temperature of warmest quarter (degC) | -   Min temperature of coldest month (degC) | -   Max temperature of warmest month (degC) |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Mean temperature of wettest quarter (degC) | -   Mean temperature of driest quarter (degC)  | -   Temperature annual range (%)            | -   Temperature mean annual (degC)          |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n| -   Temperature seasonality (degC)             | -   Mean diurnal range (degC)                  | -   Mean wind speed (m/s)                   | -   Country                                 |\n+------------------------------------------------+------------------------------------------------+---------------------------------------------+---------------------------------------------+\n\nA principal components analysis (PCA) can be used to simplify the complexity of multivariate data by transforming it into fewer dimensions while explaining as much of the variance as possible. Each observation in this dataset is one country and its associated environmental variables listed in the table above. The purpose of this analysis is to explore the relationships between tree canopy cover and various environmental factors across different countries. By examining variables such as mean annual temperature, temperature seasonality, precipitation during the warmest quarter, cloudiness, and elevation, I aim to identify patterns and trends that influence tree canopy cover. This analysis will help better understand how environmental conditions shape canopy cover and provide insights into potential environmental drivers of vegetation distribution.\n\nData Citation: Venter, Zander. (2018). Environmental variables for world countries. Retrieved 2025-02-02 from <https://www.kaggle.com/datasets/zanderventer/environmental-variables-for-world-countries>.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(here)\nlibrary(ggfortify)\nlibrary(kableExtra)\n\n#create table outlining pseudocode\npseudo_df <- data.frame(\n  Steps = c(\"Read in and clean data\", \n                  \"Create histograms to visualize data distribution of each variable\", \n                  \"Determine the optimal number of components to retain\", \n                  \"Run the PCA\", \n                  \"Plot the results in a biplot\"))\n\npseudo_df %>% kable(\"html\", escape = FALSE) %>%\n  kable_styling(bootstrap_options = c(\"hover\")) %>%\n  pack_rows(\"1. Explore Data\", 1, 2) %>%\n  pack_rows(\"2. Principal Components Analysis\", 3, 4) %>%\n  pack_rows(\"3. Visualize the results\", 5, 5) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-hover\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Steps </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"2\"><td colspan=\"1\" style=\"border-bottom: 1px solid;\"><strong>1. Explore Data</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Read in and clean data </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Create histograms to visualize data distribution of each variable </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"1\" style=\"border-bottom: 1px solid;\"><strong>2. Principal Components Analysis</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Determine the optimal number of components to retain </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Run the PCA </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"1\" style=\"border-bottom: 1px solid;\"><strong>3. Visualize the results</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Plot the results in a biplot </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n### Data Exploration\n\nFor this analysis, I selected focal variables that are generally important determinants of tree canopy cover. To visualize the structure of each variable in the dataset, I created histograms of each variable.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read in the data\nworld_env <- read_csv(here(\"data\", \"world_env_vars.csv\"))\n\n#clean the data and select focal variables\nworld_env_clean <- world_env %>% \n  clean_names() %>% \n  drop_na() %>% \n  select(tree_canopy_cover, temp_mean_annual, temp_seasonality, rain_warmest_quart, rain_mean_annual, cloudiness, elevation)\n\n#pivot data longer for use in histogram visualization\nworld_env_long <- world_env_clean %>% \n  pivot_longer(names_to = 'name', values_to = 'value', where(is.numeric))\n\n#exploratory data visualization\nggplot(world_env_long, aes(x = value)) +\n  geom_histogram(fill='#79ACBD') +\n  facet_wrap(~ name, scales = 'free_x')\n```\n\n::: {.cell-output-display}\n![Figure 1: Histograms showing the distribution of seven selected environmental variables in the dataset. ](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n### Principal Components Analysis\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#create the pcs object\nworld_env_pca <- world_env_clean %>% \n  select(where(is.numeric)) %>%\n  prcomp(scale = TRUE)\n\n#view weightings for each principal component\nworld_env_pca$rotation\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                          PC1         PC2         PC3          PC4         PC5\ntree_canopy_cover   0.4529758  0.21666554  0.07681649  0.216834626 -0.75624375\ntemp_mean_annual    0.2360685 -0.66074177 -0.25583257  0.094083041 -0.04566213\ntemp_seasonality   -0.3819649  0.37935803  0.35359574  0.409404488 -0.07941572\nrain_warmest_quart  0.4345505  0.19015356 -0.03792685  0.574699738  0.60463010\nrain_mean_annual    0.4953388  0.08396304 -0.03304056  0.065135635 -0.05893986\ncloudiness          0.3706554  0.38176430  0.17387582 -0.664823588  0.21512173\nelevation          -0.1469942  0.42849935 -0.87798408 -0.002499778 -0.06614133\n                          PC6         PC7\ntree_canopy_cover  -0.1486317 -0.31773400\ntemp_mean_annual    0.5937210 -0.28071406\ntemp_seasonality    0.6405031 -0.03157817\nrain_warmest_quart -0.1368901 -0.24284319\nrain_mean_annual    0.2554264  0.82069411\ncloudiness          0.3361570 -0.29217895\nelevation           0.1348209 -0.03697799\n```\n\n\n:::\n\n```{.r .cell-code}\n#create fields for scree plot dataframe\npc_names <- colnames(world_env_pca$rotation)\nsd_vec <- world_env_pca$sdev\nvar_vec <- sd_vec^2\n\n#creat data frame for scree plot\npct_expl_df <- data.frame(v = var_vec,\n                          pct_v = var_vec / sum(var_vec),\n                          pc = pc_names)\n\n#make a scree plot\nggplot(pct_expl_df, aes(x = pc, y = v)) +\n  geom_col(fill=\"#79ACBD\") +\n  geom_text(aes(label = scales::percent(pct_v)), vjust = -0.5, nudge_y = .002) +\n  labs(x = 'Principal component', y = 'Variance explained') +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![Figure 2: The scree plot displays Principal Components (PC) 1-7, where PC1 explains 53.92% of the total variance and PC2 explains 22.51%. This significant decrease in explained variance from PC1 to PC2 suggests that subsequent components may contribute less meaningfully to the overall variance.](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(world_env_pca,\n     \tdata = world_env_clean,\n     \tloadings = TRUE,\n     \tloadings.label = TRUE,\n     \tloadings.colour = \"black\",\n     \tloadings.label.colour = \"black\",\n     \tloadings.label.vjust = -0.5\n     \t) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![Figure 3: Principal Components Analysis (PCA) biplot illustrating correlations between global tree canopy cover and environmental variables. The arrows indicate the loading for each variable in the dimensions of PC1 and PC2 and the points indicate different countries.](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n> From the results of the PCA, I observed that tree canopy cover, precipitation of the warmest quarter, mean annual precipitation, and cloudiness are highly positively correlated. Mean annual temperature is uncorrelated with these variables and temperature seasonality and elevation are both negatively correlated with these variables. This suggests that tree canopy cover is more influenced by moisture availability (precipitation and cloudiness) than fluctuations in temperature.\n>\n> Tree canopy cover may be more dependent on the amount of water available in the environment, which directly affects tree health, growth, and density. Precipitation is a key factor for vegetation growth, especially in areas where water availability limits canopy expansion. While temperature may still play a role in influencing tree canopy cover (e.g., through seasonal growth patterns or temperature extremes), it appears that precipitation plays a more significant role in shaping tree canopy cover across the studied regions. This relationship could suggest that areas with more rainfall are likely to support denser or healthier tree canopies. Conversely, regions with less precipitation might have sparse or stressed tree canopy cover, even if temperature conditions are favorable.\n>\n> In the context of climate change, shifts in precipitation patterns could have a larger impact on tree canopy cover than changes in temperature, emphasizing the importance of managing water resources for forest and canopy preservation. Further analysis and added data could group countries by hemisphere or dominant biome to reveal additional trends among the data points.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}